# MegaBrain Application Configuration

# Application Info
quarkus.application.name=megabrain
quarkus.application.version=1.0.0-SNAPSHOT

# HTTP Server Configuration
quarkus.http.port=8080
quarkus.http.cors=true

# Logging Configuration
quarkus.log.level=INFO
quarkus.log.category."io.megabrain".level=DEBUG

# Health Check
quarkus.smallrye-health.root-path=/q/health

# Database Configuration (to be configured)
# quarkus.datasource.db-kind=postgresql
# quarkus.datasource.username=postgres
# quarkus.datasource.password=postgres
# quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/megabrain

# Disable datasource for main profile (enable only when database is configured)
quarkus.datasource.jdbc=false

# Flyway Configuration (for database migrations)
# quarkus.flyway.migrate-at-start=true
# quarkus.flyway.baseline-on-migrate=true
# quarkus.flyway.validate-on-migrate=true

# Neo4j Configuration (to be configured)
# neo4j.uri=bolt://localhost:7687
# neo4j.username=neo4j
# neo4j.password=password

# LLM Provider Configuration (to be configured)
# megabrain.llm.provider=ollama
# megabrain.llm.ollama.base-url=http://localhost:11434
# megabrain.llm.ollama.model=codellama
# megabrain.llm.openai.api-key=${OPENAI_API_KEY}
# megabrain.llm.anthropic.api-key=${ANTHROPIC_API_KEY}

# Lucene Index Configuration (to be configured)
# megabrain.index.directory=./data/index

# Grammar Cache Configuration (to be configured)
# megabrain.grammar.cache.directory=~/.megabrain/grammars

# GitHub API Configuration
github-api/mp-rest/url=https://api.github.com
# megabrain.github.token=${GITHUB_TOKEN}

# Bitbucket API Configuration
bitbucket-cloud-api/mp-rest/url=https://api.bitbucket.org
bitbucket-server-api/mp-rest/url=${BITBUCKET_SERVER_URL:http://localhost:7990}
# For Bitbucket Server/Data Center cloning, base URL must be the server root (e.g., https://bitbucket.myco.com),
# not the REST path. The clone URL will be derived as <base>/scm/<project>/<repo>.git
# megabrain.bitbucket.cloud.username=${BITBUCKET_CLOUD_USERNAME}
# megabrain.bitbucket.cloud.app-password=${BITBUCKET_CLOUD_APP_PASSWORD}
# megabrain.bitbucket.server.username=${BITBUCKET_SERVER_USERNAME}
# megabrain.bitbucket.server.token=${BITBUCKET_SERVER_TOKEN}

# GitLab API Configuration
# Base URL for GitLab API (supports both gitlab.com and self-hosted instances)
megabrain.gitlab.api-url=${GITLAB_API_URL:https://gitlab.com}
gitlab-api/mp-rest/url=${megabrain.gitlab.api-url}
gitlab-api/mp-rest/connectTimeout=10000
gitlab-api/mp-rest/readTimeout=30000

# GitLab Authentication
megabrain.gitlab.token=${GITLAB_TOKEN}

# Self-hosted GitLab SSL Configuration (for custom CA certificates)
# Uncomment and configure these for self-hosted GitLab with custom SSL certificates
# megabrain.gitlab.ssl.trust-store=${GITLAB_TRUST_STORE}
# megabrain.gitlab.ssl.trust-store-password=${GITLAB_TRUST_STORE_PASSWORD}
# megabrain.gitlab.ssl.trust-store-type=JKS
# megabrain.gitlab.ssl.verify-ssl=true

# Alternative: Disable SSL verification for testing (NOT recommended for production)
# megabrain.gitlab.ssl.verify-ssl=false

# Test Database Configuration (for @QuarkusTest with Testcontainers)
%test.quarkus.datasource.db-kind=postgresql
%test.quarkus.datasource.username=testuser
%test.quarkus.datasource.password=testpass
%test.quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/testdb

# Test Flyway Configuration
%test.quarkus.flyway.migrate-at-start=true

# Vector Search Configuration
megabrain.vector.ef-search=40

# Hybrid ranking weights (US-02-03; must sum to 1.0)
megabrain.search.hybrid.keyword-weight=0.6
megabrain.search.hybrid.vector-weight=0.4

# Search field boost configuration (US-02-05)
# megabrain.search.boost.entity-name=3.0
# megabrain.search.boost.doc-summary=2.0
# megabrain.search.boost.content=1.0
